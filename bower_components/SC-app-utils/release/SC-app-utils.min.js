"use strict";angular.module("SC-app-utils",["angular.filter","angularMoment","angular-cache","infinite-scroll","duScroll"]),angular.module("SC-app-utils").directive("scCssEqualHeight",function(){return{restrict:"A",link:function(a,b,c){var d=c.cssEqualHeight,e=document.getElementById(d.toString());b[0].style.maxHeight=e.clientHeight+"px"}}}).directive("scLazy",["$timeout",function(a){return{restrict:"C",link:function(b,c){a(function(){c.lazyload({threshold:300,effect:"fadeIn"})},0)}}}]).directive("scKeyUpLazy",function(){return{restrict:"A",link:function(a,b){b.on("keyup",function(){angular.element("html,body").scroll()})}}}).directive("scScrollPosition",["$window",function(a){return{scope:{scroll:"=scScrollPosition"},link:function(b){var c=angular.element(a),d=function(){b.scroll=c.scrollTop()};c.on("scroll",b.$apply.bind(b,d)),d()}}}]),angular.module("SC-app-utils").filter("unsafe",["$sce",function(a){return a.trustAsHtml}]).filter("twoDecimalPlacesIfFixed",function(){return function(a){var b=parseFloat(a),c=b.toFixed(2),d=b.toFixed(0);return c-d!==0?c.toString():d.toString()}}).filter("betterLimitTo",function(){return function(a,b){if(b=Math.abs(Number(b))===1/0?Number(b):parseInt(b,10),isNaN(b))return a;if("number"==typeof a&&(a=a.toString()),"undefined"==typeof a)return a;if(a.constructor!==Array&&"string"!=typeof a&&a.constructor!==Object)return a;if(a.constructor===Object){var c=Object.keys(a);if(c.length<1)return[];var d={},e=0;return angular.forEach(c,function(c){return e>=b?!1:(d[c]=a[c],void e++)}),d}return b>=0?a.slice(0,b):a.slice(b)}}).filter("betterSlugify",function(){return function(a,b){var c=angular.isUndefined,d=angular.isString,e=c(b)?"-":b;return d(a)?a.toLowerCase().replace(/\s+/g,e).replace(/[^\w\-\s]+/g,"").trim().replace(/\-\-+/g,"-"):a}}),angular.module("SC-app-utils").run(["$rootScope","$state","$window","$location","$http","CacheFactory","appConfig",function(a,b,c,d,e,f,g){g.angularCache&&(new f("defaultCache",{maxAge:9e5,cacheFlushInterval:6e6,deleteOnExpire:"aggressive"}),e.defaults.cache=f.get("defaultCache")),a.$on("event:pageNotFound",function(){b.go("app.404")}),a.$on("event:error",function(){b.go("app.error")}),a.gaPageViewOnStateChange=!1,a.$on("$stateChangeSuccess",function(){c.scrollTo(0,0);var b=d.path();c.dataLayer.push({event:"pageview",virtualUrl:b}),a.gaPageViewOnStateChange=!0})}]),angular.module("SC-app-utils").config(["$urlRouterProvider","$stateProvider","$locationProvider",function(a,b,c){a.when("","/"),a.otherwise("/404"),c.html5Mode(!0),b.state("app.error",{views:{"@":{template:'<h2 style="padding:20px">We&apos;re undergoing maintenance at the moment. Please check back a bit later.</h2>'}}}).state("app.404",{url:"/404",views:{"@":{template:'<h1 style="padding-left:20px">Page not found.</h1>'}}})}]),angular.module("SC-app-utils").factory("utilitiesFactory",["$rootScope",function(a){return{timestampSecondsToMS:function(a){var b=a;return a=a.toString(),/^\d+$/.test(a)&&10===a.length&&(b=Number(1e3*a)),b},genericHTTPCallbackError:function(b,c){404===c||403===c?a.$broadcast("event:pageNotFound"):a.$broadcast("event:error")}}}]);